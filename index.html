<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V2Ray Config Collector</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            background: #0f0f23;
            color: #e0e0e0;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            background: #1a1a2e;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }
        h1 { color: #00d4ff; margin-bottom: 10px; }
        .info { color: #888; margin-bottom: 30px; }
        .link-box {
            background: #16213e;
            border: 1px solid #00d4ff33;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            word-break: break-all;
            font-family: monospace;
            font-size: 14px;
            color: #00d4ff;
            cursor: pointer;
            transition: all 0.3s;
        }
        .link-box:hover { background: #1a2744; border-color: #00d4ff66; }
        .btn {
            background: #00d4ff;
            color: #0f0f23;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s;
        }
        .btn:hover { background: #00b8d4; transform: scale(1.05); }
        .stats {
            margin-top: 25px;
            padding: 15px;
            background: #16213e;
            border-radius: 12px;
            font-size: 14px;
        }
        label { display: block; text-align: right; margin: 15px 0 5px; color: #aaa; }
        .copied { color: #4caf50 !important; }
    </style>
</head>
<body>
    <div class="container">
        <h1>âš¡ V2Ray Collector</h1>
        <p class="info">Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§ - Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù‡Ø± Û´ Ø³Ø§Ø¹Øª</p>

        <label>ğŸ”— Ù„ÛŒÙ†Ú© Ø³Ø§Ø¨Ø³Ú©Ø±ÛŒÙ¾Ø´Ù† (Base64):</label>
        <div class="link-box" id="subLink" onclick="copyLink('sub')">
            Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...
        </div>
        <button class="btn" onclick="copyLink('sub')">ğŸ“‹ Ú©Ù¾ÛŒ Ù„ÛŒÙ†Ú© Ø³Ø§Ø¨</button>

        <label>ğŸ“„ Ù„ÛŒÙ†Ú© Ú©Ø§Ù†ÙÛŒÚ¯â€ŒÙ‡Ø§ (Ù…ØªÙ† Ø³Ø§Ø¯Ù‡):</label>
        <div class="link-box" id="rawLink" onclick="copyLink('raw')">
            Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...
        </div>
        <button class="btn" onclick="copyLink('raw')">ğŸ“‹ Ú©Ù¾ÛŒ Ù„ÛŒÙ†Ú© Ù…ØªÙ†ÛŒ</button>

        <div class="stats" id="stats">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¢Ù…Ø§Ø±...</div>
    </div>

    <script>
        // Ø¢Ø¯Ø±Ø³ Ø±ÛŒÙ¾Ùˆ Ø®ÙˆØ¯Øª Ø±Ùˆ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ø°Ø§Ø±
        const REPO = "SHAHBBBB/v2ray-collector";
        const BASE = `https://raw.githubusercontent.com/${REPO}/main/output`;

        const subUrl = `${BASE}/sub.txt`;
        const rawUrl = `${BASE}/configs.txt`;

        document.getElementById('subLink').textContent = subUrl;
        document.getElementById('rawLink').textContent = rawUrl;

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¢Ù…Ø§Ø±
        fetch(`${BASE}/info.json`)
            .then(r => r.json())
            .then(info => {
                document.getElementById('stats').innerHTML =
                    `ğŸ“Š ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ù†ÙÛŒÚ¯: <b>${info.total_configs}</b> | ` +
                    `ğŸ“… Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: <b>${new Date(info.last_update).toLocaleString('fa-IR')}</b> | ` +
                    `ğŸ“¡ Ú©Ø§Ù†Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø´Ø¯Ù‡: <b>${info.channels_checked}</b>`;
            })
            .catch(() => {
                document.getElementById('stats').textContent =
                    'Ù‡Ù†ÙˆØ² Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª. Ù…Ù†ØªØ¸Ø± Ø§ÙˆÙ„ÛŒÙ† Ø§Ø¬Ø±Ø§ Ø¨Ø§Ø´ÛŒØ¯.';
            });

        function copyLink(type) {
            const url = type === 'sub' ? subUrl : rawUrl;
            navigator.clipboard.writeText(url).then(() => {
                const el = document.getElementById(type === 'sub' ? 'subLink' : 'rawLink');
                el.classList.add('copied');
                el.textContent = 'âœ… Ú©Ù¾ÛŒ Ø´Ø¯!';
                setTimeout(() => {
                    el.classList.remove('copied');
                    el.textContent = url;
                }, 2000);
            });
        }
    </script>
</body>
</html>